<?xml version="1.0"?>
<project name="erjang" default="weave">
	<path id="erjang.classpath">
		<pathelement location="target/classes/" />
		<fileset dir="lib">
			<include name="**/*.jar" />
		</fileset>
		<pathelement path="${java.class.path}" />
	</path>

	<target name="weave" depends="">
		<echo message="Weaving files ===================" />
		<java classname="kilim.tools.Weaver" fork="yes">
			<classpath refid="erjang.classpath" />
			<assertions>
				<enable />
			</assertions>
			<arg value="-d" />
			<arg value="./target/classes" />
			<arg line="./target/classes" />
		</java>
    </target>
	
	<target name="incremental-weave" depends="">
		<echo message="Weaving files ===================" />
		<java classname="kilim.tools.Weaver" fork="yes">
			<classpath refid="erjang.classpath" />
			<assertions>
				<enable />
			</assertions>
			<arg value="-d" />
			<arg value="./target/classes" />
			<!--<arg line="${system.files}" />-->
			<arg line="./target/classes" />
		</java>
    </target>
</project>
